import paramiko
import sys
import time

HOST='ec2-3-137-208-139.us-east-2.compute.amazonaws.com'
USERNAME='kali'
KEY_FILE = './test-server.pem'
comando = 'sudo nmap -sT '+ str(sys.argv[1])

if __name__ == '__main__':
	cliente =  paramiko.SSHClient()
	cliente.set_missing_host_key_policy(paramiko.AutoAddPolicy())
	kwy = paramiko.RSAKey.from_private_key_file(KEY_FILE)
	#cliente.load_system_Host_keys()
	cliente.connect(hostname=HOST, username=USERNAME, pkey=kwy)
	stdin, stdout, stderr = cliente.exec_command(comando)
	time.sleep(1)
	result = stdout.read().decode()
	print(result)
	cliente.close()
